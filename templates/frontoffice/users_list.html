{% load static %}
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Administration des utilisateurs</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="p-4">
  <div class="container">
    <h1>Utilisateurs</h1>
    <div class="mb-3">
      <a href="/users-admin/new/" class="btn btn-primary">Nouvel utilisateur</a>
      <a href="/roles-admin/" class="btn btn-secondary">Rôles</a>
    </div>
    <table class="table table-striped">
      <thead>
        <tr>
          <th>Username</th>
          <th>Nom</th>
          <th>Email</th>
          <th>Rôles</th>
          <th>Actif</th>
          <th>Staff</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        {% for u in users %}
        <tr>
          <td>{{ u.username }}</td>
          <td>{{ u.first_name }} {{ u.last_name }}</td>
          <td>{{ u.email }}</td>
          <td>{% for g in u.groups.all %}<span class="badge badge-info">{{ g.name }}</span> {% empty %}-{% endfor %}</td>
          <td>{{ u.is_active|yesno:"Oui,Non" }}</td>
          <td>{{ u.is_staff|yesno:"Oui,Non" }}</td>
          <td>
            <a class="btn btn-sm btn-outline-primary" href="/users-admin/{{ u.id }}/edit/">Modifier</a>
            <a class="btn btn-sm btn-warning" href="/users-admin/{{ u.id }}/reset-password/">Réinitialiser le mot de passe</a>
            <a class="btn btn-sm btn-outline-danger" href="/users-admin/{{ u.id }}/delete/">Supprimer</a>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</body>
</html>

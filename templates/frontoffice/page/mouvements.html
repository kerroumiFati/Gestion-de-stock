{% load static %}
<script src="{% static 'script/mouvements.js' %}" type="text/javascript"></script>
<div class="container-fluid">
  <div class="card bg-white">
    <div class="card-header card-color">
      <p class="h2 text-center text-uppercase font-weight-bold pt-2">Journal des mouvements</p>
    </div>
    <div class="card-body container-fluid">
      <div class="row mb-2">
        <div class="col-sm-3">
          <label>Produit</label>
          <select id="mv_prod" class="form-control"><option value="">Tous</option></select>
        </div>
        <div class="col-sm-2">
          <label>Source</label>
          <select id="mv_src" class="form-control">
            <option value="">Toutes</option>
            <option>BL</option><option>BC</option><option>ACHAT</option><option>INV</option><option>CORR</option><option>AUTRE</option>
          </select>
        </div>
        <div class="col-sm-3">
          <label>Après</label>
          <input id="mv_after" type="datetime-local" class="form-control">
        </div>
        <div class="col-sm-3">
          <label>Avant</label>
          <input id="mv_before" type="datetime-local" class="form-control">
        </div>
        <div class="col-sm-1 d-flex align-items-end">
          <button id="mv_filter" class="btn btn-outline-primary">Filtrer</button>
        </div>
      </div>
      
      <!-- Boutons d'action et statistiques -->
      <div class="row mb-3">
        <div class="col-sm-6">
          <button id="mv_reset" class="btn btn-outline-secondary btn-sm">
            <i class="fas fa-undo"></i> Réinitialiser
          </button>
          <button id="mv_export" class="btn btn-outline-success btn-sm ml-2">
            <i class="fas fa-download"></i> Exporter CSV
          </button>
        </div>
        <div class="col-sm-6 text-right">
          <small id="results-count" class="text-muted">Chargement...</small>
        </div>
      </div>
      
      <!-- Résumé des mouvements -->
      <div class="row mb-3">
        <div class="col-md-4">
          <div class="card bg-success text-white">
            <div class="card-body text-center">
              <h5>Entrées</h5>
              <h3 id="total-entrees">0</h3>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <div class="card bg-danger text-white">
            <div class="card-body text-center">
              <h5>Sorties</h5>
              <h3 id="total-sorties">0</h3>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <div class="card bg-info text-white">
            <div class="card-body text-center">
              <h5>Solde</h5>
              <h3 id="solde">0</h3>
            </div>
          </div>
        </div>
      </div>
      <div class="row table-responsive m-auto rounded">
        <table id="tmouv" class="table table-hover w-100">
          <thead><tr class="text-uppercase bg-light w-100">
            <th>Date</th><th>Produit</th><th>Delta</th><th>Source</th><th>Ref</th><th>Note</th>
          </tr></thead>
          <tbody></tbody>
        </table>
      </div>
    </div>
  </div>
</div>
